c
ProductionFacility.where("location_name ILIKE ?", "%#{location.name}%").where("local_buy_price < 0")
ProductionFacility.where("location_name ILIKE ?", "%#{location.name}%").where("local_buy_price > 0")
ProductionFacility.where("location_name ILIKE ?", "%#{location.name}%")
commodities
facility
location
c
ProductionFacility.where(location_name:"Seraphim Station")
ProductionFacility.where(location_name:"Seraphim")
location
commodities
c
shard_user.user
shard_user
(shard_user.wallet_balance / facility.local_buy_price.to_f).floor
c
facility
c
      facility = ProductionFacility.where("location_name ILIKE ? AND commodity_name = ?", "%#{location.name}%", commodity_name).first
commodity
ProductionFacility.find_by(location_name: location_name)
location_name
commodity_name
c
location
c
ProductionFacility.where("location_name ILIKE ? AND commodity_name = ?", "%#{location.name}%", commodity.name).first
ProductionFacility.last
facility
commodity
commodity_id
location_name
location.name
ProductionFacility.where("location_name ILIKE ? AND commodity_id = ?", "%#{location.name}%", commodity.id)
location.name
c
ProductionFacility.find_by(facility_name:"CRU-L1")
ProductionFacility.find_by(code:"CRUL1")
location.name
ProductionFacility.find_by(code:"CRUL1")
ProductionFacility.where(code:"CRUL1").first
ProductionFacility.where(code:"CRUL1")
ProductionFacility.last
ProductionFacility
location.name
commodities
c
commodities
c
ProductionFacility.last
ProductionFacility.where("? ILIKE '%' || facility_name || '%'", location.name)
location.name
facility_name
location_name
commodities
c
user_ship.location_name
user_ship
c
facility.inventory.to_f
facility.max_inventory
min_sell_price
max_sell_price
inventory_ratio
facility
c
facility
c
facility.commodity
facility
c
facility
c
price_updates[:id]
price_updates[:local_sell_price] = new_sell_price
facility.local_sell_price.to_d
new_sell_price
n
new_sell_price
n
inventory_ratio
max_sell_price
n
facility.price_sell.to_d
facility.inventory
c
facility.commodity
c
facility.commodity
facility
c
facility
c
params
this
self
inventory_ratio
c
ProductionFacility.where(location_name: "Seraphim")
ProductionFacility.last
commodities.first
commodities
location.name.split
location.name
commodities = ProductionFacility.where("location_name ILIKE ANY (array[?])", location.name.split)
c
n
c
ProductionFacility.last
location.name
c
terminal
terminal.save
terminal
c
Terminal.last
terminal.save!
terminal
terminal.location_name = determine_location_name(terminal_data)
terminal.location_name
terminal
Terminal.last
terminal.save
terminal.location_name
terminal.location_name = determine_location_name(terminal_data)
terminal
Terminal.last
terminal.save
c
terminal
terminal.location_name
terminal_data
c
Location.last
terminal_data
Location.find_by_name(terminal.location_name)
terminal.location
terminal
c
terminal_data
c
ProductionFacility.find_by(facility_name:"Seraphim")
ProductionFacility.find_by(location_name:"Seraphim Station")
ProductionFacility.find)by
ProductionFacility.find_by(location_name:"Seraphim")
commodities = ProductionFacility.where("location_name ILIKE ANY (array[?])", location.name.split)
commodities
commodities = ProductionFacility.where("? ILIKE '%' || location_name || '%'", location.name)
location.name
location_name
ProductionFacility.where("? ILIKE '%' || location_name || '%'", location.name)
location
n
user_ship
c
n
c
commodity_name
is_buyable
n
location.name
commodity
c
is_buyable
c
ProductionFacility.where(location_name: "HDMS-Bezdek").where(commodity_name:"Titanium")
ProductionFacility.find_by(location_name: location.name, commodity_name: commodity_name)
ProductionFacility.find_by(location_name: location.name)
is_buyable
n
commodity_name
location.name
 buyable_commodities
n
commodity_name
c
commodity_name
ProductionFacility.where(location_name: location.name).where("local_sell_price > 0").where(commodity_name:"Titanium")
ProductionFacility.where(location_name: location.name).where(commodity_name:"Titanium").first
ProductionFacility.where(location_name: location.name).where("local_sell_price > 0")
ProductionFacility.where(location_name: location.name).where("local_sell_price").count
ProductionFacility.where(location_name: location.name).where("local_sell_price != 'nil'").count
ProductionFacility.where(location_name: location.name).where("local_sell_price != nil").count
ProductionFacility.where(location_name: location.name).where("local_sell_price > 0").count
ProductionFacility.where(location_name: location.name).where("local_sell_price > 0")
ProductionFacility.where(location_name: location.name).where(commodity_name:"Titanium").first.local_sell_price > 0
ProductionFacility.where(location_name: location.name).where(commodity_name:"Titanium").first.local_sell_price
ProductionFacility.where(location_name: location.name).where(commodity_name:"Titanium").first
ProductionFacility.where(location_name: location.name).where(commodity_name:"Titanium")
ProductionFacility.where(location_name: location.name).where("local_sell_price > 0")
ProductionFacility.where(location_name: location.name).pluck(:commodity_name)
ProductionFacility.where(location_name: location.name)
commodity_name
local_sell_price
cargo_to_sell
buyable_commodities
c
UserShipCargo.last
user_ship.user_ship_cargos.first
user_ship.user_ship_cargos
user_ship
buyable_commodities
c
StarBitizenRun.find_by(user_ship_cargo_id: cargo.id)
c
StarBitizenRun.last
cargo.id
cargo
star_bitizen_run = StarBitizenRun.find_by(user_ship_cargo_id: cargo.id)
c
cargo.destroy
cargo
 StarBitizenRun.find_by(user_ship_cargo_id: cargo.id)
c
shard_user
c
shard
shard_user
shard_user.user_ships.order(updated_at: :desc).first
c
UserShip.last
UserShip.where(user_id: user_id, shard_name: shard_name)
shard_name
user_id
c
ShardUser.first.user_ships
ShardUser.last.user_ships
ShardUser.last
shard_user.user_ships
shard_user
UserShip.last
shard_user.user_ships
shard_user
user_ship
c
n
user.shard_users&.find_by(shard_name: shard.name)
user.shard_users
c
 ShardUser.create!(user_id: user.id, shard_id: shard.id, shard_name: shard.name)
n
shard.name
user.shard_users
user
c
user.shard_users.first.destroy
user.shard_users.first.shard
user.shard_users.first
user.shard_users.first.destroy
user.shard_users.first
user.shard_users.first.shard
user.shard_users.last.shard
user.shard_users.last
user.shard_users.first
c
